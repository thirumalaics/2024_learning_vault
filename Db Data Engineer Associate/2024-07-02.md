- created an ext table on top of location of a managed table
	- the content of the external table was empty even though the managed table had record
	- this is because I gave the location of the managed table wrong, even though the table name has mixed casing, the folder created for the managed table is ***all lower case***
	- ![[Pasted image 20240702090411.png]]
	- When I re created the external table by droppin and creating on top of the right location, the data was the same in both and insert to one table affected the other as well
		- ![[Pasted image 20240702091530.png]]
		- the history for the managed and external table was the same as well
		- only md was diff, result of DESCRIBE DETAIL st
	- ![[Pasted image 20240702090811.png]]
	- for managed tables, the name of the folder created for the table is all lower case no matter what casing is found in the table name
	- the table name that we give is treated as case insensitive, as in the following ss I am able to query EEMP23 as EEmp23
	- ![[Pasted image 20240702091156.png]]
- I was not able to create or replace an external table with a diff location
	- had to drop and recreate


## Delta lake tables
- CTAS statements
	- to create Delta lake tables
	- full form: CREATE TABLE AS SELECT
	- `CREATE TABLE _ AS SELECT statement`
	- do not support manual schema declaration
		- they infer schema directly from the query results
	- additional options are available for CREATE TABLE statement and CTAS:
		- `CREATE TABLE new_table COMMENT "contains PII" PARTITIONED BY(city, birth_date) LOCATION '/some/path' as SELECT`
		- partition here happens similar to spark, folders and subfolders by the given columns
		- avoid using partitioning for small and medium sized tables
			- small file issue
	- obvious diff bw CREATE TABLE and CTAS is 
		- CT creates empty table
		- CTAS creates table with the help of data
- table constraints
	- two types of constraints currently supported by DB
		- NOT NULL constraints
		- CHECK constraints
	- he specifically mentioned that these constraints can be added after table creation
	- `ALTER TABLE table_name ADD CONSTRAINT constraint_name constraint_details`
	- we should make sure that there is no existing data that will violate the constraint which is to be added
	- once the constraint has been added to a table, new data violating the constraint would result in write failure
	- `ALTER TABLE orders ADD CONSTRAINT valid_date CHECK (date > '2020-01-01)`;
- cloning delta lake tables
	- for backup and making copies of delta tables
	- DEEP CLONE
		- fully copies data + md(delta log as well) from source to target table
		- `CREATE TABLE table_clone DEEP CLONE source_table;`
		- can sync changes incrementally
			- executing this command again, after the first time, synchronizes changes from source to target incrementally
			- so will updates be treated as inserts or updates?
	- SHALLOW CLONE
		- copies only the txn logs
			- no data movement
		- `CREATE TABLE table_clone SHALLOW CLONE source_table;`
		- can be used to test applying changes on a table
	- in either clones, modifications on the cloned table is tracked separately from the original table
	- source table not affected after clone